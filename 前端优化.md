# 前端优化方案

#### 一. 减少HTTP请求数
1. 合并文件（如：js，css）
2. 使用雪碧图 通过 background-image 和 background-postion 来显示不同部分
3. image map 合并多个图片，不推举使用

#### 二. 减少DNS查询
1. 通过缓存DNS查询来提高性能
2. 这种缓存可能发生在特定的缓存服务器，或者用户计算机
3. 减少DNS请求数可能会减少并行下载数。避免DNS查找减少响应时间，但减少并行下载数可能会增加响应时间。指导原则是组件可以分散在至少2个但不多于4个的不同域名。这是两者的妥协。

#### 三. 避免重定向
1. 浪费服务器资源

#### 四. 异步请求缓存
1.使用Accept-Encoding: gzip br等压缩技术
2.设置ETags（如何设置，后续更新）

#### 五. 延迟加载组件
1. 优化首屏加载速度
2. 提高性能，屏蔽掉一些不是必须加载的组件

#### 六. 预加载组件
1. 无条件预加载：一旦onload触发，你立即获取另外的组件。比如谷歌会在主页这样加载搜索结果页面用到的雪碧图。
2. 有条件预加载：基于用户动作，你推测用户下一步会去哪里并加载相应组件。
3. 预期的预加载：在发布重新设计（的网站）前提前加载。在旧网页预加载新网页的部分组件，那么切换到新网页时就不会是没有任何缓存了。

#### 七. 减少dom数
1. 尽量的减少dom，可以有效优化页面加载速度

#### 八. 不要404
1. 不要任何404(js,css,image等...), 404会浪费占用并行下载数
2. http请求非常昂贵，过多的404，会极大影响页面加载速度

#### 九. 使用CDN加速
1. 用户接近你的服务器会减少响应时间。把你的内容发布到多个，地理上分散的服务器可以让页面加载更快。
2. CDN是一群不同地点的服务器，可以高效的分发内容到用户

#### 十. 加Expires或者Cache-Control头部。
1. 对静态组件：通过设置Expires头部来实现“永不过期”策略。
2. 对动态组件：用合适的Cache-Control头部来帮助浏览器进行有条件请求。
3. 注意，如果你设置了Expires头部，当组件更新后，你必须更改文件名。

#### 十一. 传输时用gzip等压缩组件。
1. 从HTTP/1.1开始，客户端通过http请求中的Accept-Encoding头部来提示支持的压缩：
    Accept-Encoding: gzip, deflate
2. 如果服务器看到这个头部，它可能会选用列表中的某个方法压缩响应。服务器通过Content-Encoding头部提示客户端：
    Content-Encoding: gzip
3. gzip一般可减小响应的70%。尽可能去gzip更多（文本）类型的文件。html，脚本，样式，xml和json等等都应该被gzip，而图片，pdf等等不应该被gzip，因为它们本身已被压缩过，gzip它们只是浪费cpu，甚至增加文件大小。
